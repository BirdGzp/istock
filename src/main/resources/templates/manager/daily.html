<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>行程</title>
</head>

<link rel="stylesheet" href="/css/common.css">
<!-- import Vue before Element -->
<script src="/plugs/ele/vue.js"></script>
<!-- import JavaScript -->
<script src="/plugs/ele/index.js"></script>
<script src="/plugs/axios/axios.min.js"></script>
<link rel="stylesheet" href="/plugs/ele/theme/index.css">


<body>
<div id="app">

    <el-container>
        <el-header>
            <el-menu :default-active="activeIndex" class="el-menu-demo" mode="horizontal"
                     active-text-color="#ffd04b" background-color="#545c64">
                <el-menu-item index="1"><a href="/">工具中心</a></el-menu-item>
                <el-menu-item index="2"><a href="/manager/daily.html">行程</a></el-menu-item>
                <el-menu-item index="3"><a href="/manager/scraps.html">随手记</a></el-menu-item>
                <el-menu-item index="4"><a href="/manager/jargon.html">行话</a></el-menu-item>
                <el-menu-item index="5"><a href="/manager/diary.html">日记</a></el-menu-item>
                <el-menu-item index="6"><a href="/manager/finance.html">金融</a></el-menu-item>
            </el-menu>
        </el-header>

        <el-container>
            <el-row>
                <el-col :span="16">
                    <el-calendar>
                        <!-- 这里使用的是 2.5 slot 语法，对于新项目请使用 2.6 slot 语法-->
                        <template
                                slot="dateCell"
                                slot-scope="{date, data}">
                            <p :class="data.isSelected ? 'is-selected' : ''">

                                <el-row>
                                    <el-popover
                                            placement="top-start"
                                            placement="right"
                                            width="400"
                                            trigger="hover">
                                        <el-table :data="dateMap.get(data.day)">
                                            <el-table-column width="70" property="index" label=""></el-table-column>

                                            <el-table-column width="200" property="willDo" label="行程"></el-table-column>
                                            <el-table-column width="70" property="state" label="状态"></el-table-column>

                                        </el-table>
                                        <el-row slot="reference">{{ data.day.split('-').slice(1).join('-') }}
                                        </el-row>
                                    </el-popover>
                                </el-row>

                            </p>
                        </template>
                    </el-calendar>
                </el-col>
                <el-col :span="8">
                    <template>
                        <div>
                            <el-radio-group v-model="radio1">
                                <el-radio-button label="不重复"></el-radio-button>
                                <el-radio-button label="每年"></el-radio-button>
                                <el-radio-button label="每月"></el-radio-button>
                                <el-radio-button label="每周"></el-radio-button>
                                <el-radio-button label="每天"></el-radio-button>
                            </el-radio-group>
                        </div>
                        <div class="block">
                            <span class="demonstration">行程日期</span>
                            <el-date-picker
                                    v-model="value2"
                                    align="right"
                                    type="date"
                                    placeholder="选择日期"
                                    :picker-options="pickerOptions">
                            </el-date-picker>
                        </div>
                    </template>
                </el-col>

            </el-row>

            <!--  &lt;!&ndash; Table &ndash;&gt;
              <el-button type="text" @click="dialogTableVisible = true">打开嵌套表格的 Dialog</el-button>

              <el-dialog title="收货地址" :visible.sync="dialogTableVisible">
                  <el-table :data="gridData">
                      <el-table-column property="date" label="日期" width="150"></el-table-column>
                      <el-table-column property="name" label="姓名" width="200"></el-table-column>
                      <el-table-column property="address" label="地址"></el-table-column>
                  </el-table>
              </el-dialog>-->

            <!--&lt;!&ndash; Form &ndash;&gt;
            <el-button type="text" @click="dialogFormVisible = true">打开嵌套表单的 Dialog</el-button>

            <el-dialog title="收货地址" :visible.sync="dialogFormVisible">
                <el-form :model="form">
                    <el-form-item label="活动名称" :label-width="formLabelWidth">
                        <el-input v-model="form.name" autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item label="活动区域" :label-width="formLabelWidth">
                        <el-select v-model="form.region" placeholder="请选择活动区域">
                            <el-option label="区域一" value="shanghai"></el-option>
                            <el-option label="区域二" value="beijing"></el-option>
                        </el-select>
                    </el-form-item>
                </el-form>
                <div slot="footer" class="dialog-footer">
                    <el-button @click="dialogFormVisible = false">取 消</el-button>
                    <el-button type="primary" @click="dialogFormVisible = false">确 定</el-button>
                </div>
            </el-dialog>-->

        </el-container>

    </el-container>

</div>
</body>
<script>
    const vue = new Vue({
        el: '#app',
        data: function () {
            return {
                activeIndex: '2',
                dailyData: [{
                    date: '2020-03-26',
                    willDo: "study 看电视 打游戏 DNF 地下城 道学 阿萨德阿萨德桉树大声道桉树大 "
                },
                    {
                        date: '2020-03-27',
                        willDo: "play"
                    }],
                dateMap: new Map(),
                willDo: ''

            };
        },
        methods: {}
    });

    function dailyDataToDateMap() {
        vue.dateMap = new Map();
        if (vue.dailyData == null) {
            return;
        }
        for (var i = 0; i < vue.dailyData.length; i++) {
            var array = vue.dailyData[i].willDo.split(' ');
            var list = new Array();
            for (var j = 0; j < array.length; j++) {
                var temp = new Object();
                temp.index = j + 1;
                temp.willDo = array[j];
                list.push(temp)
            }
            vue.dateMap.set(vue.dailyData[i].date, list);
            console.log(vue.dateMap)
        }
    }


    axios.post('/api/data', {})
        .then(function (response) {
            dailyDataToDateMap()
        })
        .catch(function (error) {
            console.log(error);
        });

</script>
</html>